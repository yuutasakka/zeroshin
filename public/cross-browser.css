/* クロスブラウザ対応CSS - 全ブラウザで統一した表示 */

/* === ベンダープレフィックス対応 === */

/* Backdrop Filter - Safari/Chrome対応 */
@supports (backdrop-filter: blur(16px)) or (-webkit-backdrop-filter: blur(16px)) {
  .backdrop-blur-lg {
    -webkit-backdrop-filter: blur(16px);
    backdrop-filter: blur(16px);
  }
}

/* Backdrop Filter非対応ブラウザ向けフォールバック */
@supports not (backdrop-filter: blur(16px)) {
  .backdrop-blur-lg {
    background-color: rgba(255, 255, 255, 0.95);
  }
}

/* グラデーションテキスト - Webkit系 */
.bg-gradient-to-r {
  background-image: linear-gradient(to right, var(--tw-gradient-stops));
}

.bg-clip-text {
  -webkit-background-clip: text;
  background-clip: text;
}

.text-transparent {
  -webkit-text-fill-color: transparent;
  color: transparent;
}

/* グラデーションテキスト非対応ブラウザ向け */
@supports not (-webkit-background-clip: text) {
  .bg-clip-text.text-transparent {
    -webkit-text-fill-color: currentColor;
    color: #1e40af; /* フォールバックカラー */
    background: none;
  }
}

/* === Fluid Typography (clamp使用) === */
h1, .text-4xl, .text-5xl {
  font-size: clamp(1.75rem, 4vw + 0.5rem, 3rem);
  line-height: clamp(2.25rem, 5vw + 0.5rem, 3.75rem);
}

h2, .text-3xl {
  font-size: clamp(1.5rem, 3vw + 0.5rem, 2.25rem);
  line-height: clamp(2rem, 4vw + 0.5rem, 3rem);
}

h3, .text-2xl {
  font-size: clamp(1.25rem, 2.5vw + 0.5rem, 1.875rem);
  line-height: clamp(1.75rem, 3vw + 0.5rem, 2.5rem);
}

.text-lg {
  font-size: clamp(1rem, 1.5vw + 0.25rem, 1.25rem);
  line-height: clamp(1.5rem, 2vw + 0.25rem, 1.875rem);
}

.text-base {
  font-size: clamp(0.875rem, 1vw + 0.25rem, 1rem);
  line-height: clamp(1.25rem, 1.5vw + 0.25rem, 1.5rem);
}

/* === フォント読み込み最適化 === */
@font-face {
  font-family: 'Inter';
  src: url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
  font-display: swap;
}

/* フォントスタック - より安全なフォールバック */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', 'Arial', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* === レスポンシブブレークポイント最適化 === */

/* モバイルファースト設計 */
.container {
  width: 100%;
  margin: 0 auto;
  padding: 0 1rem;
}

/* 320px以上 (小型スマートフォン) */
@media (min-width: 320px) {
  .container {
    max-width: 100%;
  }
}

/* 640px以上 (大型スマートフォン) */
@media (min-width: 640px) {
  .container {
    max-width: 640px;
  }
}

/* 768px以上 (タブレット) */
@media (min-width: 768px) {
  .container {
    max-width: 768px;
  }
  
  .md\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  
  .md\:grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* 1024px以上 (デスクトップ) */
@media (min-width: 1024px) {
  .container {
    max-width: 1024px;
  }
}

/* 1280px以上 (大型デスクトップ) */
@media (min-width: 1280px) {
  .container {
    max-width: 1280px;
  }
}

/* === ブラウザ別修正 === */

/* Firefox専用修正 */
@-moz-document url-prefix() {
  /* Firefoxでのフォント太さ調整 */
  .font-semibold {
    font-weight: 600;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Firefoxでのグラデーション修正 */
  .bg-gradient-to-r {
    background-image: -moz-linear-gradient(left, var(--tw-gradient-stops));
  }
}

/* Safari専用修正 */
@supports (-webkit-touch-callout: none) {
  /* Safariでのフォーカススタイル */
  button:focus,
  a:focus,
  input:focus {
    outline: -webkit-focus-ring-color auto 5px;
  }
  
  /* Safariでのflexbox修正 */
  .flex {
    display: -webkit-flex;
    display: flex;
  }
}

/* IE11対応（まだ使用されている場合） */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  /* IE11でのグリッド代替 */
  .grid {
    display: -ms-grid;
    display: grid;
  }
  
  /* IE11でのflexbox */
  .flex {
    display: -ms-flexbox;
    display: flex;
  }
}

/* === アニメーション最適化 === */

/* reduced-motion対応 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* === 印刷対応 === */
@media print {
  body {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  .no-print,
  nav,
  header,
  footer {
    display: none !important;
  }
  
  a {
    text-decoration: underline;
  }
  
  a[href]:after {
    content: " (" attr(href) ")";
  }
}

/* === ダークモード対応 === */
@media (prefers-color-scheme: dark) {
  /* ダークモード非対応の場合はスキップ */
  @supports (color-scheme: light dark) {
    :root {
      color-scheme: light dark;
    }
  }
}

/* === ハイコントラストモード対応 === */
@media (prefers-contrast: high) {
  * {
    border-width: 2px !important;
  }
  
  button,
  a {
    text-decoration: underline !important;
  }
}

/* === パフォーマンス最適化 === */

/* GPU acceleration for animations */
.transition-all,
.transform {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
}

/* Prevent layout shift */
img,
video {
  aspect-ratio: attr(width) / attr(height);
  max-width: 100%;
  height: auto;
}

/* === モバイルタッチ最適化 === */
@media (hover: none) and (pointer: coarse) {
  button,
  a,
  input,
  select,
  textarea {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* タップハイライト色の統一 */
  * {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  }
}